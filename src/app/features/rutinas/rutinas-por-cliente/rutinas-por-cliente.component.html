<!-- src/app/features/rutinas/rutinas-por-cliente/rutinas-por-cliente.component.html -->

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Rutinas del Cliente {{ clienteId }}</h2>
  <button class="btn btn-primary" (click)="abrirModal()">
    <i class="bi bi-plus-lg"></i> Nueva Rutina
  </button>
</div>

<table class="table table-hover table-bordered">
  <thead class="table-light text-center">
    <tr>
      <th>Fecha Creaci√≥n</th>
      <th>Objetivo</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of rutinas" class="align-middle text-center">
      <td>{{ r.fechaCreacion | date:'dd/MM/yyyy' }}</td>
      <td>{{ r.objetivo }}</td>
      <td>
        <button class="btn btn-sm btn-outline-primary me-1"
                (click)="abrirModal(r)">
          <i class="bi bi-pencil-square"></i>
        </button>
        <button class="btn btn-sm btn-outline-danger me-1"
                (click)="eliminarRutina(r.idRutina)">
          <i class="bi bi-trash3"></i>
        </button>
        <button class="btn btn-sm btn-outline-secondary"
                (click)="generarPDF(r.idRutina)">
          <i class="bi bi-file-earmark-pdf"></i>
        </button>
      </td>
    </tr>
  </tbody>
</table>

<!-- Modal de Form -->
<div *ngIf="mostrarModal"
     class="modal-backdrop show fade d-block"></div>
<div *ngIf="mostrarModal"
     class="modal fade show d-block"
     tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content p-4 rounded-3 shadow-sm">
      <div class="modal-header border-0">
        <h5 class="modal-title">
          {{ rutinaSeleccionada ? 'Editar Rutina' : 'Nueva Rutina' }}
        </h5>
        <button type="button"
                class="btn-close"
                aria-label="Close"
                (click)="cerrarModal()"></button>
      </div>
      <div class="modal-body">
        <app-rutina-form [clienteId]="clienteId"
                         [rutinaAEditar]="rutinaSeleccionada"
                         (guardado)="cerrarModal()">
        </app-rutina-form>
      </div>
    </div>
  </div>
</div>
