<div class="container">
  <div class="header">
    <h2>Gestión de Medidas Corporales</h2>
    <button (click)="abrirModalNueva()" class="btn btn-primary">
      <i class="bi bi-plus-lg"></i> Nueva Medida
    </button>
  </div>

  <!-- Buscador -->
  <input
    type="text"
    placeholder="Buscar medidas..."
    [(ngModel)]="filtro"
    (input)="filtrarMedidas()"
    class="form-control mb-4"
  />

  <!-- Tabla de Medidas -->
  <table class="table table-hover">
    <thead class="table-light">
      <tr>
        <th>Imagen</th>
        <th>Nombre</th>
        <th>Unidad</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let medida of medidasFiltradas">
        <td>
          <img
            [src]="medida.imagen || 'https://cdn-icons-png.flaticon.com/512/3502/3502688.png'"
            class="rounded-circle img-thumbnail"
            style="width: 50px; height: 50px; object-fit: cover;"
            alt="Imagen de {{medida.nombreMedida}}"
          />
        </td>
        <td>{{ medida.nombreMedida }}</td>
        <td>{{ medida.unidadMedida }}</td>
        <td>
          <button (click)="abrirModalEditar(medida)" class="btn btn-sm btn-warning me-2">
            <i class="bi bi-pencil"></i> Editar
          </button>
          <button (click)="eliminarMedida(medida.codMedida!)" class="btn btn-sm btn-danger">
            <i class="bi bi-trash"></i> Eliminar
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Modal para agregar/editar -->
  <div *ngIf="mostrarModal" class="modal-backdrop show fade d-block"></div>

  <div *ngIf="mostrarModal" class="modal fade show d-block" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-4 rounded-4 shadow-sm">
        <div class="modal-header border-0">
          <h5 class="modal-title">
            {{ editando ? 'Editar Medida' : 'Nueva Medida' }}
          </h5>
          <button type="button" class="btn-close" (click)="cerrarModal()"></button>
        </div>
        <div class="modal-body">
          <!-- Aquí incluimos el formulario reactivo -->
          <app-medida-insert-reactive
  [medidaAEditar]="medidaSeleccionada"
  (guardado)="cerrarModal()">
</app-medida-insert-reactive>

        </div>
      </div>
    </div>
  </div>
</div>